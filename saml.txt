# Install and configure SAML

sudo apt-get install libxml2-dev libxmlsec1-dev libxmlsec1-openssl xmlsec1
python3 -m pip install pysaml2
 
Optional
#wget http://xmlsoft.org/sources/libxml2-2.9.1.tar.gz
#tar -xvf libxml2-2.9.1.tar.gz
#cd libxml2-2.9.1
#./configure && make && sudo make install

# Configure App in Okta
# Get a okta developer account, then get okta url, e.g.
# https://dev-85323738-admin.okta.com, then fill froms:
# OKTA-->Dashboard-->Create App Integration-->SAML 2.0 --> App Name: myApp --> Next
# Single sign-on URL : https://host_name_or_ip/login/vpn/saml
# Audience URI (SP Entity ID) : https://host_name_or_ip/
# Attribute Statements
# FirstName	Unspecified	user.firstName
# LastName	Unspecified	user.lastName
# Email	Unspecified	user.email
# After the form is filled, then the App created has a tab "Sign On", then "SAML Signing Certificates" --> Action--> View Idp Metadata
# e.g. my metadata is https://dev-85323738.okta.com/app/exk7u91tbptIw9j2A5d7/sso/saml/metadata

# Install SAML in the server
sudo apt install python3-pysaml2
#Optional
#git clone https://github.com/IdentityPython/pysaml2.git
#cd /home/ubuntu/saml/pysaml2/src/saml2


python3 -m pip install Flask-Login requests Flask-SQLAlchemy pysaml2

# Download the OKTA SAML APP https://github.com/jpf/okta-pysaml2-example

 

